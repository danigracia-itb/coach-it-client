import{N as ae,O as ne,_ as G,u as ge,Q as pe,h as E,J as ke,r as P,x as De,l as we,o as C,c as O,a as Y,t as U,s as de,b as z,k as X,d as ce,w as Me,e as ue,R as _e,$ as be,a0 as T,G as ee,a1 as xe,a2 as Ce,Z as Se,p as We,q as Oe,F as te,m as se}from"./index-299e80f0.js";var le={exports:{}};(function(a,n){(function(h,f){a.exports=f()})(ae,function(){var h=1e3,f=6e4,g=36e5,u="millisecond",m="second",v="minute",p="hour",y="day",W="week",w="month",H="quarter",b="year",j="date",re="Invalid Date",ye=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ve={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var s=["th","st","nd","rd"],e=i%100;return"["+i+(s[(e-20)%10]||s[e]||s[0])+"]"}},Q=function(i,s,e){var r=String(i);return!r||r.length>=s?i:""+Array(s+1-r.length).join(e)+i},$e={s:Q,z:function(i){var s=-i.utcOffset(),e=Math.abs(s),r=Math.floor(e/60),t=e%60;return(s<=0?"+":"-")+Q(r,2,"0")+":"+Q(t,2,"0")},m:function i(s,e){if(s.date()<e.date())return-i(e,s);var r=12*(e.year()-s.year())+(e.month()-s.month()),t=s.clone().add(r,w),o=e-t<0,d=s.clone().add(r+(o?-1:1),w);return+(-(r+(e-t)/(o?t-d:d-t))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:w,y:b,w:W,d:y,D:j,h:p,m:v,s:m,ms:u,Q:H}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},L="en",B={};B[L]=ve;var ie="$isDayjsObject",K=function(i){return i instanceof J||!(!i||!i[ie])},V=function i(s,e,r){var t;if(!s)return L;if(typeof s=="string"){var o=s.toLowerCase();B[o]&&(t=o),e&&(B[o]=e,t=o);var d=s.split("-");if(!t&&d.length>1)return i(d[0])}else{var l=s.name;B[l]=s,t=l}return!r&&t&&(L=t),t||!r&&L},k=function(i,s){if(K(i))return i.clone();var e=typeof s=="object"?s:{};return e.date=i,e.args=arguments,new J(e)},c=$e;c.l=V,c.i=K,c.w=function(i,s){return k(i,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var J=function(){function i(e){this.$L=V(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[ie]=!0}var s=i.prototype;return s.parse=function(e){this.$d=function(r){var t=r.date,o=r.utc;if(t===null)return new Date(NaN);if(c.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var d=t.match(ye);if(d){var l=d[2]-1||0,$=(d[7]||"0").substring(0,3);return o?new Date(Date.UTC(d[1],l,d[3]||1,d[4]||0,d[5]||0,d[6]||0,$)):new Date(d[1],l,d[3]||1,d[4]||0,d[5]||0,d[6]||0,$)}}return new Date(t)}(e),this.init()},s.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},s.$utils=function(){return c},s.isValid=function(){return this.$d.toString()!==re},s.isSame=function(e,r){var t=k(e);return this.startOf(r)<=t&&t<=this.endOf(r)},s.isAfter=function(e,r){return k(e)<this.startOf(r)},s.isBefore=function(e,r){return this.endOf(r)<k(e)},s.$g=function(e,r,t){return c.u(e)?this[r]:this.set(t,e)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(e,r){var t=this,o=!!c.u(r)||r,d=c.p(e),l=function(A,x){var I=c.w(t.$u?Date.UTC(t.$y,x,A):new Date(t.$y,x,A),t);return o?I:I.endOf(y)},$=function(A,x){return c.w(t.toDate()[A].apply(t.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(x)),t)},D=this.$W,M=this.$M,S=this.$D,R="set"+(this.$u?"UTC":"");switch(d){case b:return o?l(1,0):l(31,11);case w:return o?l(1,M):l(0,M+1);case W:var N=this.$locale().weekStart||0,F=(D<N?D+7:D)-N;return l(o?S-F:S+(6-F),M);case y:case j:return $(R+"Hours",0);case p:return $(R+"Minutes",1);case v:return $(R+"Seconds",2);case m:return $(R+"Milliseconds",3);default:return this.clone()}},s.endOf=function(e){return this.startOf(e,!1)},s.$set=function(e,r){var t,o=c.p(e),d="set"+(this.$u?"UTC":""),l=(t={},t[y]=d+"Date",t[j]=d+"Date",t[w]=d+"Month",t[b]=d+"FullYear",t[p]=d+"Hours",t[v]=d+"Minutes",t[m]=d+"Seconds",t[u]=d+"Milliseconds",t)[o],$=o===y?this.$D+(r-this.$W):r;if(o===w||o===b){var D=this.clone().set(j,1);D.$d[l]($),D.init(),this.$d=D.set(j,Math.min(this.$D,D.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},s.set=function(e,r){return this.clone().$set(e,r)},s.get=function(e){return this[c.p(e)]()},s.add=function(e,r){var t,o=this;e=Number(e);var d=c.p(r),l=function(M){var S=k(o);return c.w(S.date(S.date()+Math.round(M*e)),o)};if(d===w)return this.set(w,this.$M+e);if(d===b)return this.set(b,this.$y+e);if(d===y)return l(1);if(d===W)return l(7);var $=(t={},t[v]=f,t[p]=g,t[m]=h,t)[d]||1,D=this.$d.getTime()+e*$;return c.w(D,this)},s.subtract=function(e,r){return this.add(-1*e,r)},s.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||re;var o=e||"YYYY-MM-DDTHH:mm:ssZ",d=c.z(this),l=this.$H,$=this.$m,D=this.$M,M=t.weekdays,S=t.months,R=t.meridiem,N=function(x,I,q,Z){return x&&(x[I]||x(r,o))||q[I].slice(0,Z)},F=function(x){return c.s(l%12||12,x,"0")},A=R||function(x,I,q){var Z=x<12?"AM":"PM";return q?Z.toLowerCase():Z};return o.replace(me,function(x,I){return I||function(q){switch(q){case"YY":return String(r.$y).slice(-2);case"YYYY":return c.s(r.$y,4,"0");case"M":return D+1;case"MM":return c.s(D+1,2,"0");case"MMM":return N(t.monthsShort,D,S,3);case"MMMM":return N(S,D);case"D":return r.$D;case"DD":return c.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return N(t.weekdaysMin,r.$W,M,2);case"ddd":return N(t.weekdaysShort,r.$W,M,3);case"dddd":return M[r.$W];case"H":return String(l);case"HH":return c.s(l,2,"0");case"h":return F(1);case"hh":return F(2);case"a":return A(l,$,!0);case"A":return A(l,$,!1);case"m":return String($);case"mm":return c.s($,2,"0");case"s":return String(r.$s);case"ss":return c.s(r.$s,2,"0");case"SSS":return c.s(r.$ms,3,"0");case"Z":return d}return null}(x)||d.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(e,r,t){var o,d=this,l=c.p(r),$=k(e),D=($.utcOffset()-this.utcOffset())*f,M=this-$,S=function(){return c.m(d,$)};switch(l){case b:o=S()/12;break;case w:o=S();break;case H:o=S()/3;break;case W:o=(M-D)/6048e5;break;case y:o=(M-D)/864e5;break;case p:o=M/g;break;case v:o=M/f;break;case m:o=M/h;break;default:o=M}return t?o:c.a(o)},s.daysInMonth=function(){return this.endOf(w).$D},s.$locale=function(){return B[this.$L]},s.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),o=V(e,r,!0);return o&&(t.$L=o),t},s.clone=function(){return c.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},i}(),oe=J.prototype;return k.prototype=oe,[["$ms",u],["$s",m],["$m",v],["$H",p],["$W",y],["$M",w],["$y",b],["$D",j]].forEach(function(i){oe[i[1]]=function(s){return this.$g(s,i[0],i[1])}}),k.extend=function(i,s){return i.$i||(i(s,J,k),i.$i=!0),k},k.locale=V,k.isDayjs=K,k.unix=function(i){return k(1e3*i)},k.en=B[L],k.Ls=B,k.p={},k})})(le);var Ye=le.exports;const _=ne(Ye);var he={exports:{}};(function(a,n){(function(h,f){a.exports=f()})(ae,function(){return function(h,f){f.prototype.weekday=function(g){var u=this.$locale().weekStart||0,m=this.$W,v=(m<u?m+7:m)-u;return this.$utils().u(g)?v:this.subtract(v,"day").add(g,"day")}}})})(he);var Ie=he.exports;const Te=ne(Ie);var fe={exports:{}};(function(a,n){(function(h,f){a.exports=f()})(ae,function(){var h="week",f="year";return function(g,u,m){var v=u.prototype;v.week=function(p){if(p===void 0&&(p=null),p!==null)return this.add(7*(p-this.week()),"day");var y=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var W=m(this).startOf(f).add(1,f).date(y),w=m(this).endOf(h);if(W.isBefore(w))return 1}var H=m(this).startOf(f).date(y).startOf(h).subtract(1,"millisecond"),b=this.diff(H,h,!0);return b<0?m(this).startOf("week").week():Math.ceil(b)},v.weeks=function(p){return p===void 0&&(p=null),this.week(p)}}})})(fe);var Be=fe.exports;const Ne=ne(Be);const Ae=a=>(We("data-v-7812ad70"),a=a(),Oe(),a),ze={class:"d-flex flex-column gap-1 justify-content-center align-items-center pt-5 pt-md-0"},He=Ae(()=>Y("span",{class:"d-none d-md-inline"},"Workout",-1)),je={key:1,class:"btn btn-success d-flex gap-1 align-items-center"},Re={class:"d-none d-md-inline"},Le={__name:"CalendarDayItem",props:["isCoach","day","isCurrentMonth","isToday","isRestday","athlete","hasWorkout","workout","hasBodyWeight","bodyWeight"],setup(a){const n=a,h=ge(),f=pe(),g=E(!1),u=E(!1),m=ke(()=>_(n.day.date).format("D")),v=E(!1);function p(y){y.preventDefault(),be.showContextMenu({x:y.x,y:y.y,zIndex:3,items:[...(n.isRestday||g.value)&&!u.value?[{label:"Available Day",icon:T("img",{src:"../../../assets/icons/calendar-check-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:()=>{ee.post("available-day",{user_id:n.athlete.id,date:n.day.date}),g.value=!1,u.value=!0}}]:[{label:"Rest Day",icon:T("img",{src:"../../../assets/icons/calendar-xmark-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:()=>{ee.post("rest-day",{user_id:n.athlete.id,date:n.day.date}),g.value=!0,u.value=!1}}],...n.hasWorkout&&!v.value?[{label:"Edit",icon:T("img",{src:"/assets/icons/pen-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:()=>{f.push({path:h.is_coach?`/coach/athlete/${n.athlete.id}/workout/${n.workout.id}`:`/athlete/workout/${n.workout.id}`})}},{label:"Copy",icon:T("img",{src:"/assets/icons/copy-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:()=>{xe(n.workout.id,n.day.date,f)}},{label:"Delete",icon:T("img",{src:"/assets/icons/trash-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:async()=>{v.value=!0,await ee.delete("workout/"+n.workout.id)}}]:[...(n.isRestday||g.value)&&!u.value?[]:[{label:"Workout",icon:T("img",{src:"/assets/icons/plus-solid.svg",style:{width:"15",height:"15",zIndex:100}}),divided:!0,onClick:()=>{f.push(h.is_coach?`/coach/athlete/${n.athlete.id}/workout/create?date=${n.day.date}`:`/athlete/workout/create?date=${n.day.date}`)}}]],...n.hasBodyWeight?[{label:"Body Weight",icon:T("img",{src:"/assets/icons/pen-solid.svg",style:{width:"15",height:"15",zIndex:100}}),onClick:()=>{Ce(n.bodyWeight.value,n.bodyWeight.id,n.isCoach)}}]:[{label:"Body Weight",icon:T("img",{src:"/assets/icons/plus-solid.svg",style:{width:"15",height:"15",zIndex:100}}),onClick:()=>{Se(n.day.date,n.athlete.id,n.isCoach)}}]]})}return(y,W)=>{const w=P("font-awesome-icon"),H=De("tooltip");return we((C(),O("li",{onContextmenu:W[1]||(W[1]=b=>p(b)),class:de(["calendar-day",{"calendar-day--not-current":!a.day.isCurrentMonth,"calendar-day--today bg-dark":a.isToday,"calendar-day--rest-day":(a.isRestday||g.value)&&!u.value}])},[Y("span",{class:de(["fw-bold",a.isToday?"text-white":""])},U(m.value),3),a.day.isCurrentMonth?(C(),O("button",{key:0,onClick:W[0]||(W[0]=b=>p(b)),class:"add-btn btn btn-success"},[z(w,{icon:"fa-solid fa-plus"})])):X("",!0),Y("div",ze,[a.hasWorkout&&!v.value?(C(),ce(ue(_e),{key:0,to:ue(h).is_coach?`/coach/athlete/${a.athlete.id}/workout/${a.workout.id}`:`/athlete/workout/${a.workout.id}`,class:"btn btn-primary d-flex gap-1 align-items-center"},{default:Me(()=>[z(w,{icon:"fa-solid fa-dumbbell"}),He]),_:1},8,["to"])):X("",!0),a.hasBodyWeight?(C(),O("div",je,[z(w,{icon:"fa-solid fa-weight-scale"}),Y("span",Re,U(a.bodyWeight.value)+"kg",1)])):X("",!0)])],34)),[[H,(a.isRestday||g.value)&&!u.value?"Rest day":""]])}}},Fe=G(Le,[["__scopeId","data-v-7812ad70"]]),qe={name:"CalendarModeSelector",props:{currentDate:{type:String,required:!0},selectedDate:{type:Object,required:!0}},computed:{selectedMonth(){return this.selectedDate.format("MMMM YYYY")}},methods:{selectPrevious(){let a=_(this.selectedDate).subtract(1,"month");this.$emit("dateSelected",a)},selectCurrent(){let a=_(this.currentDate);this.$emit("dateSelected",a)},selectNext(){let a=_(this.selectedDate).add(1,"month");this.$emit("dateSelected",a)}}},Ee={class:"p-3 bg-primary m-0"},Pe={class:"d-flex justify-content-between mt-2"},Ue={class:"fw-bold calendar-month-header-selected-month text-center mt-2 text-white"};function Ve(a,n,h,f,g,u){const m=P("font-awesome-icon");return C(),O("div",Ee,[Y("div",Pe,[Y("span",{onClick:n[0]||(n[0]=(...v)=>u.selectPrevious&&u.selectPrevious(...v)),class:"btn text-light"},[z(m,{icon:"fa-solid fa-angle-left",size:"2xl"})]),Y("h4",Ue,U(u.selectedMonth),1),Y("span",{onClick:n[1]||(n[1]=(...v)=>u.selectNext&&u.selectNext(...v)),class:"btn text-light"},[z(m,{icon:"fa-solid fa-angle-right",size:"2xl"})])])])}const Je=G(qe,[["render",Ve]]);const Ze={class:"day-of-week bg-dark text-white text-center mb-0 fw-bold"},Ge={__name:"CalendarWeekdays",setup(a){const n=E(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]),h=E(["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]);return(f,g)=>(C(),O("ol",Ze,[(C(!0),O(te,null,se(n.value,u=>(C(),O("li",{key:u,class:"list-unstyled d-none d-md-block"},U(u),1))),128)),(C(!0),O(te,null,se(h.value,u=>(C(),O("li",{key:u,class:"list-unstyled d-block d-md-none"},U(u),1))),128))]))}},Qe=G(Ge,[["__scopeId","data-v-624ae7d7"]]);_.extend(Te);_.extend(Ne);const Ke={name:"Calendar",components:{CalendarDayItem:Fe,CalendarHeader:Je,CalendarWeekdays:Qe},props:{athlete:{type:Object,required:!0},isCoach:{type:Boolean,required:!0},workouts:{type:Array,required:!0},restDays:{type:Array,required:!0},bodyWeights:{type:Array,required:!0}},data(){return{selectedDate:_()}},computed:{days(){return[...this.previousMonthDays,...this.currentMonthDays,...this.nextMonthDays]},today(){return _().format("YYYY-MM-DD")},month(){return Number(this.selectedDate.format("M"))},year(){return Number(this.selectedDate.format("YYYY"))},numberOfDaysInMonth(){return _(this.selectedDate).daysInMonth()},currentMonthDays(){return[...Array(this.numberOfDaysInMonth)].map((a,n)=>({date:_(`${this.year}-${this.month}-${n+1}`).format("YYYY-MM-DD"),isCurrentMonth:!0}))},previousMonthDays(){const a=this.getWeekday(this.currentMonthDays[0].date),n=_(`${this.year}-${this.month}-01`).subtract(1,"month"),h=a?a-1:6,f=_(this.currentMonthDays[0].date).subtract(h,"day").date();return[...Array(h)].map((g,u)=>({date:_(`${n.year()}-${n.month()+1}-${f+u}`).format("YYYY-MM-DD"),isCurrentMonth:!1}))},nextMonthDays(){const a=this.getWeekday(`${this.year}-${this.month}-${this.currentMonthDays.length}`),n=_(`${this.year}-${this.month}-01`).add(1,"month"),h=a&&7-a;return[...Array(h)].map((f,g)=>({date:_(`${n.year()}-${n.month()+1}-${g+1}`).format("YYYY-MM-DD"),isCurrentMonth:!1}))}},methods:{getWeekday(a){return _(a).weekday()},selectDate(a){this.selectedDate=a},hasWorkout(a){return this.workouts.some(n=>n.date===a)},hasBodyWeight(a){return this.bodyWeights.some(n=>n.date===a)},isRestDay(a){return this.restDays.some(n=>n.date===a)},getWorkout(a){return this.workouts.find(n=>n.date===a)},getBodyWeight(a){return this.bodyWeights.find(n=>n.date===a)}}},Xe={class:"card mt-5 user-select-none"},et={class:"days-grid"};function tt(a,n,h,f,g,u){const m=P("CalendarHeader"),v=P("CalendarWeekdays"),p=P("CalendarDayItem");return C(),O("div",Xe,[z(m,{"current-date":u.today,"selected-date":g.selectedDate,onDateSelected:u.selectDate},null,8,["current-date","selected-date","onDateSelected"]),z(v),Y("ol",et,[(C(!0),O(te,null,se(u.days,y=>(C(),ce(p,{key:y.date,day:y,"is-today":y.date===u.today,"is-restday":u.isRestDay(y.date),athlete:h.athlete,"has-workout":u.hasWorkout(y.date),workout:u.getWorkout(y.date),"has-body-weight":u.hasBodyWeight(y.date),bodyWeight:u.getBodyWeight(y.date),isCoach:h.isCoach},null,8,["day","is-today","is-restday","athlete","has-workout","workout","has-body-weight","bodyWeight","isCoach"]))),128))])])}const at=G(Ke,[["render",tt],["__scopeId","data-v-f6528e43"]]);export{at as C};
